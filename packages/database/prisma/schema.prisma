generator client {
  provider = "prisma-client-js"
  output   = "./../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id          String          @id @default(uuid())
  username    String          @unique
  email       String          @unique
  password    String
  avatar      String?
  rooms       UsersOnRooms[]
  roomAdmin   Room?
  strokes     Stroke[]
  createdAt   DateTime        @default(now())
}

model Room {
  id          String          @id @default(uuid())
  roomName    String          @unique
  users       UsersOnRooms[]
  adminId     String          @unique
  admin       User            @relation(fields: [adminId], references: [id])
  strokes     Stroke[]
  createdAt   DateTime        @default(now())
}

model UsersOnRooms {
  userId      String
  user        User            @relation(fields: [userId], references: [id])
  roomId      String
  room        Room            @relation(fields: [roomId], references: [id])
  createdAt   DateTime        @default(now())
  @@id([userId, roomId])
}

model Stroke{
  id          String          @id @default(uuid())
  sequenceNo  Int             @default(autoincrement())
  message     String
  color       Color?          @default(white)
  userId      String
  user        User            @relation(fields: [userId], references: [id])
  roomId      String
  room        Room            @relation(fields: [roomId], references: [id])
  createdAt   DateTime        @default(now())
}

enum Color {
  red
  green
  blue
  white
  black
}